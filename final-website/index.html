<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foreign Exchange Data Visualization</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <style>
        body {
            padding: 60px 120px 60px 120px;
            font-family: 'Roboto', sans-serif;
            background-color: rgba(245, 245, 220, 0.425);
        }

        .section {
            margin-bottom: 20px;
        }

        .section-title {
            cursor: pointer;
            font-weight: bold;
        }

        .section-content {
            display: none;
            margin-top: 10px;
        }

        #interaction-grid img,
        #transformation-grid img,
        #color-grid img {
            width: 100%;
            max-width: 750px;
            margin: auto;
        }
    </style>
</head>

<body>
    <div class="section" id="introduction-section">
        <div class="section-title1 button-86" onclick="toggleSection('introduction')">1. Introduction</div>
        <div class="section-content">
            <h2>1. Introduction</h2>
            <h3>1.1. Domain and Project Motivation</h3>
            <p>Our team has decided to focus a project around foreign exchange (FOREX) currency data, with an emphasis on historical data. Many paid services exist that allow those dealing in forex trading to analyze current data and to aid in market predictions, but we think there may be value in visualizing the data with a map to cater towards a new audience. A typical user of our vis would be beginner forex traders, people who have families in other countries, currency collector, and anyone who is traveling to another country. Some questions the viewer may be able to answer from visualizations of this data are:
            <li>Which countries have stable/volatile currency exchange rates?</li>
            <li>Which trade commodities in a given country have more direct influence over the currency exchange rates?</li>
            <li> How has the relative value of a given nations' currency changed over time on the world stage? With a specific country/countries?</li>

            <p>Thus, our users can be grouped into two categories. One category is comprised of those who hold a certain level of knowledge and familiarity with FOREX currency data or what they want to do with the currency data. For example, people who want to send money to family in other countries know that they must find the exchange rate between their country and their family’s country. These users would perform a query using our visualization tool, more specifically, they would identify the feature of the data which is the exchange rate between the two countries. These users might not have all of the necessary information, but they generally know what they want the result of their use of the visualization to look like. Our second category of users are those who are generally new to FOREX in the context of stocks trading and do not fully understand the data or how to query it. Their lack of knowledge and familiarity means that they do not know how to classify and digest the information provided by the raw data, so they are most likely interested in searching the data, more specifically, browsing and exploring trends and outliers. They are not particularly interested in granular data, but rather they’re interested in trends as this indicates a mindshare or a general sentiment among the denizens of this field. In other words, their primary goal is to just get started utilizing this data, not necessarily making the most strategic decisions.
            For our more advanced group, they want to be able to see the result of their specific search. Thus, our visualizations accommodate that through their structure; our map visualization allows users to search the FOREX currency rate between any two countries. Fundamentally, we wanted our visualization to be interactive because the data can be viewed on multiple spectrums: large trends to minute details, FOREX currency data of all countries versus the exchange rate between two specific countries, FOREX currency data normalized in reference to a specific country versus the FOREX currency data relative to two countries. The ways in which the data can be viewed is not one size fits all and by providing an interactive interface to our visualizations, we allowed for an intuitive and customizable user experience. 
            </p>

            <h3>1.2. Data</h3>
            <p>There are many data sets out there that collect and archive FOREX ticker data. Our team anticipated the biggest hurdle being obtaining data in a workable format and one that is not a paid service API. Thus, HistData.com [1] was the free source used for historical FOREX data in our project. The dataset type is a table, where the attributes are date (ordinal), time (ordinal), open price (quantitative), high price (quantitative), low price (quantitative), closing price (quantitative), and volume (quantitative). 
            Currently, our data is discrete with each item in our dataset being a collection of information at a specific moment in time. 
            </p>
            
            <h3>1.3. Project Contributions</h3>
            <p>The intention of this project is to provide the user with a front end graphical interface that will allow them to be able to interact with their desired foreign exchange trading data.  The prepared visualizations display a world map where the user will be able to interact with the different countries to compare conversion rates for the two chosen countries. 
                A key goal of this project is to allow users to ask geographical questions about their foreign exchange rates, which introduced the need for mapping API (and eventually ended with the use of Leaflet [2]). The hope is that by allowing users to see geographical connections between the currency pair they have selected, they can gain a greater context for possible price fluctuations.  This doubly serves as the mechanism for users to select a new currency pair to analyze by allowing them to click directly on countries on their map. 
            </p>
        </div>
    </div>

    <div class="section" id="related-work-section">
        <div class="section-title2 button-86" onclick="toggleSection('related-work')">2. Related Work</div>
        <div class="section-content">
            <h2>2. Related Work</h2>
            <p>Both before and during the implementation of our project, we researched and referenced several related works that would eventually
            inspire further developments within our final visualization. Below are several of these works which contributed the most towards our
            resulting FOREX visualization.</p>
            <h3>2.1. Flight Paths Map Visualization</h3>
            <img src="images/2-1.png" alt="Flight Paths Map Visualization" width="500">
            <p>[3] Categorizing Flight Paths using Data Visualization and Clustering Methodologies.</p>
            <p>This visualization, and specifically this image depicting flight paths within the United States, is reflective of the map view of our visualization (as of the beta release). The primary similarities are seen in both the lines being drawn on top of the map as well as the sidebar overlay on the left edge of the screen. Within each of these general similarities are details that distinguish this visualization from ours, however. Visible in the image is the fact that the lines are not just straight lines connecting two points (as in our vis), but are actually visualizing the flight routes. Due to the nature of our dataset being non-geographic, there isn’t any need to consider the line’s shape besides for aesthetic purposes. Additionally, the lines are encoded using color hue, likely to indicate flight direction. In our visualization, we do not change the line color, although there is potential for future releases to adjust it based on the exchange rate between two selected countries’ currencies. The sidebar overlay seen in the image is very similar to our current implementation as well, with charts giving details based on the two airports being inspected. The main difference here is that we only plan to show one chart at a time in an attempt to reduce cognitive load for our target user, a beginner FOREX trader. One thing we plan to implement that’s present in this part of the image is playback controls for the charts, seen in the form of play and pause buttons above each chart. For our visualization, we aim to implement a play/pause button along with a scrubber bar to allow the user to skip through the animation. Overall, this visualization contains a surprising amount of similarities to what we’ve implemented thus far, and contains a few details that could inspire further developments within our visualization.
            </p>
        </div>
    </div>

    <div class="section" id="implementation-section">
        <div class="section-title3 button-86" onclick="toggleSection('implementation')">3. Implementation</div>
        <div class="section-content">
            <h2>3. Implementation</h2>
            <p>We manually downloaded csv files from histdata.com.</p>
            <p>We transformed the original csv files into more granular/specific csv files where single fields were split into multiple subfields. For example, the original csv files had the timestamp as a single field, but we split it up into its individual components (i.e., year, month, day, hour, minute, second).</p>
            <p>We transformed our parsed csv files into json files to embed data directly into the website. This would allow our viz to work without an accompanying database.</p>
            <p>We have two potential software architectures for our viz. Our first one will be a traditional server-client architecture where our web app communicates with our local data. Our second one will be a static site architecture where the data is embedded directly into the site and the web application does not perform networking.</p>
            
            <p>We implemented our front-end web application using React [4] and wrote its code with HTML, CSS, and JavaScript. The top-level of our application contains a React component for the map view, which we leveraged Leaflet API [2] to create. 
                Within the map view, we utilized two datasets for allowing the user to click two countries and draw a line between them. We used a World Borders Dataset [5] which contains polygons for each country's borders in conjunction with Leaflet's layering system to create clickable countries. The connecting line drawn between them is made using Leaflet's built-in Polyline component and animated using an easing function. We decided that the endpoints for the line should be the geographic center of each country; therefore, we utilized a World Countries Centroids dataset [6] to place each endpoint at the appropriate center coordinate.
                The other core component of our application is the candlestick chart, which is encapsulated within the map component's rendering pass, making it very simple to pass the selected countries to the chart. This chart is created using ApexCharts [7], and pulls data for the user-selected countries from a JSON file at runtime. Most of the functionality for the candlestick chart is already implemented via ApexCharts, but we manually implemented the animated data playback by limiting the range of visible data based on a given timestep. One limitation/side-effect of this approach is that the chart's horizontal axis automatically resizes based on the amount of visible data instead of staying fixed; we would aim to rework this in the future in order to reduce the amount of visual movement caused by resizing during playback, hopefully reducing cognitive load for our targeted user of "beginner FOREX trader".
                The candlestick view can be collapsed to the side, which was implemented by giving it's container a negative offset on the right edge. The point of implementing this was to allow the user to have a full and unobstructed map view while selecting countries to compare, aiding readability and usability.
            </p>
        </div>
    </div>

    <div class="section" id="results-section">
        <div class="section-title4 button-86" onclick="toggleSection('results')">4. Results</div>
        <div class="section-content">
            <h2>4. Results</h2>
            <p></p>
            <h3>4.1. Interaction/Animation</h3>
            <div id="interaction-grid">
                <p>Figure 4.1A</p>
                <p>Figure 4.1B</p>
                <p>Figure 4.1C</p>
                <img src="images/4-1A.gif" alt="Map Link Animation" width = 300>
                <img src="images/4-1B.gif" alt="Animated Candlestick" width = 300>
                <img src="images/4-1C.PNG" alt="Search Bar" width = 300>
                <p>Figure 4.1A depicts a link that smoothly animates from one selected country on the map to a second selected country. Point marks indicate the geographic center coordinates of each selected country, with a line mark drawn between them establishing a country-country pair.</p>
                <p>Figure 4.1B depicts a candlestick chart with hoverable tooltips and navigation utilities, including zooming and panning. Time is aligned on the horizontal axis, and the price is on the vertical axis. Line marks indicate minute-by-minute currency pair movements, with the length channel describing the difference between high and low prices (the length of narrow lines on the top and bottom of the “body”), as well as the difference between open and close prices (the top and bottom edges of the body). The hoverable tooltip provides exact values for open, low, high, and close prices for a specific mark. Color hue is used to describe positive or negative price changes. An interactable scrubber bar plays back historical data at a user-selected playback rate, with play, pause, rewind, and fast-forward buttons.</p>
                <p>Figure 4.1C depicts a search bar that allows the user to type in a country name instead of locating and selecting it on the map. One country is searched for at a time; if two countries are already selected, the most recently selected one will be replaced. If the user enters the name of a currently selected country, it will be deselected.</p>
            </div>
            <p>Throughout the implementation of our visualization, the theme of interaction has driven a large portion of the design choices we’ve made thus far. In general, we’ve used interaction to allow the user to compare two currencies at a time as opposed to viewing the entire dataset at once. As our target user is a beginner FOREX trader, we prioritized viewing a smaller subset of the dataset in order to reduce cognitive load. Figure 4.1C demonstrates one interactable component that contributes towards this idea, a search bar for the user to enter a country. Although the user could previously interact with the map view to select countries, we found that a search bar reduces latency in searching for a specific country, and is an essential function should the user not know the geographic location of a specific country they wish to inspect. Giving the user multiple options for interactively viewing a subset of data provides flexibility in our design.</p>
            <p>Figure 4.1B shows another interactive component within our vis, the candlestick chart. One of the main interactive elements of this chart are the tooltips that appear on mouseover. By providing open, close, high, and low prices by simply hovering over the mark, latency is largely reduced as the user no longer needs to spend mental resources aligning each mark with the axes to determine its values. Additionally, providing interactive zoom and pan controls allows the user to resize and navigate the data as they see necessary. This figure also explores animation, shown by the data being rendered to the chart over time. As one of our main goals was to make FOREX data easily digestible for our targeted user (a beginner FOREX trader), playing back historical data at a speed they choose can incrementally introduce them to the data and allow them to investigate it at their own pace.</p>
            <p>Finally, we explored using animation in figure 4.1A, where the link drawn between selected countries smoothly interpolates from one coordinate to the other over time. Although it was still clear that the link indicates the selected country-country pair before implementing animation, we found that smoothly animating the link is less jarring than having it appear abruptly. A trade-off with using animation here is increased latency between the user’s input and displaying the link. We found a middle-ground by using an interpolation speed that wasn’t so slow as to drastically increase the latency, but wasn’t so fast as to be visually distracting. This solution led us to believe that the use of animation in this instance was justified and increased the effectiveness of our vis. The link is drawn from the least recently selected country to the most recently selected country. This was done to complement the order of selection - the least recently selected country will remain selected until deselected, so it acts as an "anchor point" and stands to be the baseline country for future comparisons. The link animating outwards from the least recently selected country reinforces this "baseline country" concept for the user.</p>
            
            <h3>4.2. Transformation</h3>
            <div id="transformation-grid">
                <p>Figure 4.2A</p>
                <img src="images/4-2A.png" alt="Transformation Image" width = 1000>
                <p>Figure 4.2A once again depicts the link drawn between two selected countries.</p>
            </div>
            <p></p>
            <p>Figure 4.2A situates the data in terms of a geographical perspective, allowing the user to think of the various forex metrics not just as numbers, but a certain financial relationship between two countries or regions. A priori, the overview view provides no indication about the forex data between two activated countries. As such, we argue that the transformation is not within the data (because no numerical aspect of the data is conveyed to the user), but rather in the context that the data is understood. A forex pairing viewed through the lens of geography might lead the user to consider external factors (e.g., geopolitical) that might influence the data of a given forex pairing. This might not be particularly relevant to those who just want to discover trends and search for specific data points, but to those who aim to enjoy trends, they might be influenced as previously described. They might view the data not just with what is explicitly there (e.g., candlestick graph), but consider it in conjunction with how we’ve presented other aspects of the viz.</p>
            
            
            <h3>4.3. Color</h3>
            <div id="color-grid">
                <p>Figure 4.3A</p>
                <p>Figure 4.3B</p>
                <img src="images/4-3A.png" alt="Color - Map View" width = 500>
                <img src="images/4-3B.png" alt="Color - Candlestick Chart" width = 500>
                <p>Figure 4.3A shows the general appearance of the map view of our vis. It depicts a link that smoothly animates from one selected country on the map to a second selected country. Point marks indicate the geographic center coordinates of each selected country, with a line mark drawn between them establishing a country-country pair. The red line contrasts well against the green and blue backgrounds, and provides a link between the two red point marks both by color and line. Currently, red was chosen as the color hue for purely for contrast, but a future goal would be to have it change between green and red based on the exchange rate price increases/decreases shown in the candlestick chart. Countries are colored various shades of green based on user mouse hover or click.</p>
                <p>Figure 4.3B shows the general appearance of our candlestick view of our vis. Color hue is used as a categorical attribute for encoding price increases and decreases.</p>
            </div>
            <p></p>
            <p>A large portion of our color choices were based on balancing our “novelty budget” and having a descriptive visualization. As shown by Figure 4.3A, we’ve made our map very similar to those that would be found in common apps used by the general public. Thus, they will be able to quickly situate themselves geographically with blue indicating bodies of water and green indicating landmasses. Adjusting the color saturation of each country based on user input also contributes to our primary motivator of interaction. A dark green color when the user mouses over a country helps to emphasize it, and a darker green color when a country is selected helps to distinguish it from unselected countries. The red pins indicate which countries have been activated. Again, this is very common in many map-based or map-adjacent applications and users will intuitively understand that the countries with pins are the countries of interest. We believe that the combination of these design choices will make it for the average user to at least understand the interface of our viz (e.g., what actions are allowed, what items are interactive) and what countries are activated or involved in our viz.</p>
            <p>We went for a similar approach for our candlestick view, as shown in figure 4.3B, which shows the general shape of the data and actual numerical data once items are hovered over. We reuse the same red/green color scheme as our overview view as it is a color scheme common in financial dashboards (e.g., stock market visualizations) and has appropriate cultural connotations that align with the information they are conveying. Green indicates a rise in the forex values, red indicates a fall in the forex values. In other words, green indicates a rise which is perceived as good, and red indicates a fall which is perceived as bad.</p>
            
            <h3>4.4. Final Visualization</h3>
            <p>Code for our final visualization is available on <a href="https://github.com/tgalcik1/FOREX-vis">Github.</a></p>
            <iframe src="http://localhost:3000/" title="FOREX Visualization" width="100%" height="900vh"></iframe>
        </div>
    </div>

    <div class="section" id="future-direction-section">
        <div class="section-title5 button-86" onclick="toggleSection('future-direction')">5. Future Directions</div>
        <div class="section-content">
            <h2>5. Future Directions</h2>
            <p>Moving forward, there are several promising avenues for the enhancement and expansion of our forex data visualization project. Firstly, integrating machine learning algorithms into the system could enable predictive analytics, allowing users to anticipate forex trends and make more informed decisions. Additionally, incorporating real-time data feeds and advanced analytics tools can provide users with up-to-the-minute insights, ensuring the relevance and accuracy of the displayed information.</p>
            
            <p>Furthermore, expanding the geographical scope of the project to include a more comprehensive set of countries and regions could offer a broader understanding of global forex dynamics. Collaborating with financial experts and economists to incorporate additional economic indicators and contextual data could also enrich the analytical capabilities of the visualization tool, providing users with a more holistic view of the factors influencing forex relationships.</p>
            
            <p>In the realm of user experience, exploring virtual reality (VR) or augmented reality (AR) applications could revolutionize how users interact with and perceive forex data, offering an immersive and intuitive experience. Additionally, ensuring compatibility with various devices and platforms can enhance accessibility and user adoption.
            We would want to make the application run on real-time data as our current version is operating on saved historical data. This would obviously make it more useful for users who are interested in present-day data and want to make decisions based on analyses and visualizations of said data.</p>
            
            <p>By addressing these future directions, our research project has the potential to evolve into a more sophisticated and comprehensive tool, empowering users with advanced analytics, real-time insights, and an enriched understanding of the complex dynamics inherent in the forex market.</p>
            
            Our stretch-goal would be to use this data, that is traditionally used granularly for brokerage trading and profit making, and change the lens to looking for geopolitical trends or diplomacy. 
                The main limitation in regards to this stretch goal is the fact that our data is historical, thus introducing large amounts of potential variance in cases where currencies undergo drastic changes due to factors such as hyperinflation and longstanding currencies.
            Additionally, options open for the map to have visual queues to alert users to a currency pair that is experiencing some form of indicator that market movement will happen. This would be useful because even if that user is not actively watching a particular pair chart, their attention can be gained and they can click on to that specific pair from being alerted. One initial idea for this alert is to have a country pair flash, blink or glow on the ma p. This is one example of some of the possibilities that open up by including a graphical map as a core part of the user interface.
        </div>
    </div>

    
    <div class="section" id="reference-section">
        <div class="section-title6 button-86" onclick="toggleSection('reference')">References</div>
        <div class="section-content">
            <h2>References</h2>
            <p>[1] (No author), <i>Free Forex Historical Data.</i> https://www.histdata.com/download-free-forex-data/?/metatrader/1-minute-bar-quotes: Histdata, 2020. </p>
            <p>[2] V. Agafonkin, <i>Leaflet.</i> Available: Version 1.9.4. https://leafletjs.com/, 2011.</p>
            <p>[3] Y. Song, K. Yu, and S. Young, <i>Categorizing Flight Paths using Data Visualization and Clustering Methodologies.</i>https://arxiv.org/ftp/arxiv/papers/2310/2310.00773.pdf, 2020.</p>
            <p>[4] J. Walke, <i>React.</i> Version 18.2.0. https://react.dev/, 2013.</p>
            <p>[5] B. Sandvik, <i>World Borders Dataset.</i> https://thematicmapping.org/downloads/world_borders.php, 2009.</p>
            <p>[6] G. Rehkemper, <i>World Countries Centroids.</i> https://gavinr.com/open-data/world-countries-centroids/, 2022.</p>
            <p>[7] J. Chhipa and B. Lagunas, <i>ApexCharts.</i> Version 3.44.2. https://apexcharts.com/, 2018.</p>
        </div>
    </div>
    <script>
        function toggleSection(sectionId) {
            var sectionContent = document.getElementById(sectionId + '-section').getElementsByClassName('section-content')[0];
            sectionContent.style.display = (sectionContent.style.display === 'none' || sectionContent.style.display === '') ? 'block' : 'none';
        }
    </script>

</body>

</html>
